# https://relay.dev/graphql/connections.htm#sec-Connection-Types
interface Connection {
  edges: [Edge!]!
  pageInfo: PageInfo!

  # https://developer.apple.com/library/archive/releasenotes/InterapplicationCommunication/RN-JavaScriptForAutomation/Articles/OSX10-10.html
  byId(id: String!): Node
}

# https://relay.dev/graphql/connections.htm#sec-Edge-Types
interface Edge {
  node: Node!
  cursor: String!
}
# https://relay.dev/graphql/connections.htm#sec-undefined.PageInfo
type PageInfo {
  hasPreviousPage: Boolean!
  hasNextPage: Boolean!
  startCursor: String!
  endCursor: String!
}

interface Node {
  id: String!
}

type Project implements Node {
  name: String!
  id: String!
  rootTask: Task!
  availableTaskCount: Int!
  completed: Boolean!
}

type TaskConection implements Connection {
  byId(id: String!): Task
  edges: [TaskEdge!]!
  pageInfo: PageInfo!
}

type TaskEdge implements Edge {
  cursor: String!
  node: Task!
}

type Task implements Node {
  name: String!
  id: String!
  effectiveDueDate: String
  completed: Boolean!
  effectivelyCompleted: Boolean!
  containingProject: Project
  flagged: Boolean!
  tasks: TaskConection! @noCall
}

type ProjectConnection implements Connection {
  byId(id: String!): Project
  edges: [ProjectEdge!]!
  pageInfo: PageInfo!
}

type ProjectEdge implements Edge {
  cursor: String!
  node: Project!
}

type FolderConnection implements Connection {
  byId(id: String!): Project
  edges: [FolderEdge!]!
  pageInfo: PageInfo!
}

type FolderEdge implements Edge {
  cursor: String!
  node: Folder!
}

type Folder implements Node {
  name: String!
  id: String!
  projects: ProjectConnection! @noCall
}

type DefaultDocument {
  projects: ProjectConnection! @noCall
  folders: FolderConnection! @noCall
  inboxTasks: TaskConection! @noCall
  flattenedTasks: TaskConection! @noCall
}

type Query {
  defaultDocument: DefaultDocument!
}

input Condition {
  enabled: Boolean!
  field: String!
  operation: String! = "="
  value: String! = "true"
}

directive @filter(conditions: [Condition]!) on FIELD
directive @noCall on FIELD_DEFINITION
